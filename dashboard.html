<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Painel Org. Borges</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="css/dashboard.css" rel="stylesheet">
</head>
<body>

    <div id="loadingOverlay"><div class="spinner-border text-light" role="status"></div></div>

    <div id="loginScreen">
        <div class="login-card fade-in">
            <h1 class="display-4 mb-2">üöÄ</h1>
            <h3 class="mb-4 fw-bold">Painel Org. Borges</h3>
            <button id="btnLogin" class="btn btn-dark w-100 py-3 rounded-pill shadow-lg"><i class="fab fa-google me-2"></i> Acessar com Google</button>
            <p id="authError" class="text-danger mt-3 small"></p>
        </div>
    </div>

    <nav class="navbar navbar-custom fixed-top px-3 glass-effect">
        <div class="d-flex align-items-center">
            <button id="backBtn" class="btn btn-icon me-2" style="display:none;"><i class="fas fa-arrow-left"></i></button>
            <span class="navbar-brand mb-0 h1 fw-bold theme-text" id="pageTitle"><i class="fas fa-cube text-primary me-2"></i>Painel Org. Borges</span>
        </div>
        <div class="d-flex align-items-center gap-3">
            <i class="fas fa-moon cursor-pointer theme-text" id="themeToggle"></i>
            <button class="btn btn-icon" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu"><i class="fas fa-bars theme-text"></i></button>
        </div>
    </nav>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="sidebarMenu">
        <div class="offcanvas-header"><h5 class="offcanvas-title fw-bold">Navega√ß√£o</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div>
        <div class="offcanvas-body d-flex flex-column">
            <div class="nav flex-column gap-2">
                <button class="btn btn-light w-100 text-start p-3 nav-btn active" data-target="home"><i class="fas fa-th-large me-2 text-primary"></i> Projetos & √Åreas</button>
                <button class="btn btn-light w-100 text-start p-3 nav-btn" data-target="iframe" data-url="index.html"><i class="fas fa-chart-line me-2 text-success"></i> Financeiro</button>
                <button class="btn btn-light w-100 text-start p-3 nav-btn" data-target="iframe" data-url="life.html"><i class="fas fa-dna me-2 text-info"></i> Life Co-Creation</button>
                <button class="btn btn-light w-100 text-start p-3 nav-btn text-danger" id="btnTrash"><i class="fas fa-trash me-2"></i> Lixeira Global</button>
            </div>
            <div class="mt-auto"><hr><div class="d-flex align-items-center justify-content-between p-2"><small class="text-muted" id="userEmail">...</small><button id="btnLogout" class="btn btn-sm btn-outline-danger">Sair</button></div></div>
        </div>
    </div>

    <main class="main-container custom-scrollbar">
        <section id="view-projects" class="fade-in pb-5">
            <div class="section-block">
                <div class="d-flex justify-content-between align-items-center mb-2 px-1">
                    <h6 class="section-title text-success m-0"><i class="fas fa-home me-2"></i>PESSOAL</h6>
                    <button class="btn btn-xs btn-outline-secondary rounded-pill small-btn" onclick="addSpacer('Pessoal')">+ Espa√ßo Vazio</button>
                </div>
                <div id="grid-Pessoal" class="project-grid min-h-100" data-type="Pessoal"></div>
            </div>
            <div class="section-block mt-4">
                <div class="d-flex justify-content-between align-items-center mb-2 px-1">
                    <h6 class="section-title text-primary m-0"><i class="fas fa-briefcase me-2"></i>PROFISSIONAL</h6>
                    <button class="btn btn-xs btn-outline-secondary rounded-pill small-btn" onclick="addSpacer('Profissional')">+ Espa√ßo Vazio</button>
                </div>
                <div id="grid-Profissional" class="project-grid min-h-100" data-type="Profissional"></div>
            </div>
            <div class="section-block mt-4">
                <div class="d-flex justify-content-between align-items-center mb-2 px-1">
                    <h6 class="section-title text-warning m-0"><i class="fas fa-lightbulb me-2"></i>IDEIAS & OUTROS</h6>
                    <button class="btn btn-xs btn-outline-secondary rounded-pill small-btn" onclick="addSpacer('Ideia')">+ Espa√ßo Vazio</button>
                </div>
                <div id="grid-Ideia" class="project-grid min-h-100" data-type="Ideia"></div>
            </div>
        </section>

        <section id="view-kanban" style="display:none;" class="fade-in pb-5">
            <div class="d-flex justify-content-between align-items-center mb-3 p-2 bg-white rounded shadow-sm border">
                <select id="viewModeSelector" class="form-select form-select-sm border-0 fw-bold text-primary w-auto">
                    <option value="hybrid">üëÅÔ∏è H√≠brido</option>
                    <option value="cards">üÉè S√≥ Cards</option>
                    <option value="kanban">‚úÖ S√≥ Checklist</option>
                </select>
                <div class="d-flex align-items-center gap-2">
                    <button class="btn btn-sm btn-outline-secondary rounded-pill small-btn" onclick="addSubSpacer()">+ Espa√ßo</button>
                    <button class="btn btn-sm btn-primary rounded-circle" onclick="openSubCardModal()" title="Novo Recurso"><i class="fas fa-plus"></i></button>
                </div>
            </div>

            <div id="area-resources">
                <h6 class="fw-bold text-muted mb-2 small ps-1">RECURSOS & LISTAS</h6>
                <div id="subCardsGrid" class="sub-card-grid mb-4 min-h-100"></div>
                <hr class="border-secondary opacity-10 my-4">
            </div>

            <div id="area-kanban">
                <button class="btn btn-primary w-100 py-2 mb-3 shadow-sm" onclick="openTaskModal()"><i class="fas fa-check-square me-2"></i> Adicionar Tarefa Principal</button>
                <div class="search-bar-container mb-3"><i class="fas fa-search text-muted"></i><input type="text" id="taskSearch" placeholder="Buscar tarefas..."></div>
                <div class="kanban-board">
                    <div class="kanban-col-wrapper"><div class="kanban-header urgent"><span>üî• Urgente</span><span class="count-badge">0</span></div><div id="col-urgent" class="kanban-col" data-priority="urgent"></div></div>
                    <div class="kanban-col-wrapper"><div class="kanban-header medium"><span>‚ö†Ô∏è Prioridade M√©dia</span><span class="count-badge">0</span></div><div id="col-medium" class="kanban-col" data-priority="medium"></div></div>
                    <div class="kanban-col-wrapper"><div class="kanban-header low"><span>‚úÖ Prioridade Baixa</span><span class="count-badge">0</span></div><div id="col-low" class="kanban-col" data-priority="low"></div></div>
                </div>
            </div>
        </section>

        <iframe id="appFrame" class="full-frame"></iframe>
    </main>

    <button id="fabBtn" class="fab shadow-lg"><i class="fas fa-plus"></i></button>

    <div class="modal fade" id="projectModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content border-0 shadow"><div class="modal-body p-4"><h5 class="fw-bold mb-3">Novo Bloco/Projeto</h5><input type="hidden" id="projId"><div class="form-floating mb-3"><input type="text" class="form-control" id="projTitle" placeholder="Nome"><label>Nome</label></div><div class="form-floating mb-3"><select class="form-select" id="projType"><option value="Pessoal">üè† Pessoal</option><option value="Profissional">üíº Profissional</option><option value="Ideia">üí° Ideia</option></select><label>Bloco de Destino</label></div><label class="small text-muted mb-2">Cor do Card</label><div class="d-flex flex-wrap gap-2 mb-4 justify-content-center"><div class="color-dot bg-grad-1 selected" onclick="selectColor(this, 'bg-grad-1')"></div><div class="color-dot bg-grad-2" onclick="selectColor(this, 'bg-grad-2')"></div><div class="color-dot bg-grad-3" onclick="selectColor(this, 'bg-grad-3')"></div><div class="color-dot bg-grad-4" onclick="selectColor(this, 'bg-grad-4')"></div><div class="color-dot bg-grad-5" onclick="selectColor(this, 'bg-grad-5')"></div><div class="color-dot bg-grad-6" onclick="selectColor(this, 'bg-grad-6')"></div><div class="color-dot bg-grad-7" onclick="selectColor(this, 'bg-grad-7')"></div><div class="color-dot bg-grad-8" onclick="selectColor(this, 'bg-grad-8')"></div></div><input type="hidden" id="selectedColor" value="bg-grad-1"><button type="button" class="btn btn-primary w-100" id="btnSaveProj">Salvar</button><button class="btn btn-link text-danger w-100 mt-2 btn-sm" id="btnDelProj" style="display:none">Excluir</button></div></div></div></div>

    <div class="modal fade" id="subCardModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow">
                <div class="modal-body p-4">
                    <h5 class="fw-bold mb-3">Novo Recurso</h5>
                    <input type="hidden" id="subCardId">
                    <div class="mb-3"><input type="text" id="subCardTitle" class="form-control fw-bold" placeholder="T√≠tulo (ex: Lista de Compras)"></div>
                    <div class="mb-3">
                        <select id="subCardType" class="form-select bg-light">
                            <option value="checklist">‚òëÔ∏è Checklist / Lista</option>
                            <option value="text">üìÑ Texto Simples</option>
                            <option value="link">üîó Link / URL</option>
                        </select>
                    </div>
                    <div class="mb-3" id="areaInputText"><textarea id="subCardContent" class="form-control" rows="5" placeholder="Conte√∫do..."></textarea></div>
                    <div class="mb-3" id="areaInputChecklist" style="display:none;">
                        <div class="input-group mb-2">
                            <select id="newCheckPriority" class="form-select" style="max-width: 100px;">
                                <option value="low">üü¢</option><option value="medium">üü°</option><option value="urgent">üî¥</option>
                            </select>
                            <input type="text" id="newCheckItem" class="form-control" placeholder="Item...">
                            <button class="btn btn-outline-secondary" onclick="addTempItem()"><i class="fas fa-plus"></i></button>
                        </div>
                        <small class="text-muted d-block mb-2">Arraste para reordenar:</small>
                        <div id="tempChecklistList" class="checklist-container"></div>
                    </div>
                    <label class="small text-muted">Cor</label>
                    <div class="d-flex gap-2 mb-4"><div class="color-dot bg-grad-1 selected" onclick="selectSubColor(this, 'bg-grad-1')"></div><div class="color-dot bg-grad-2" onclick="selectSubColor(this, 'bg-grad-2')"></div><div class="color-dot bg-grad-3" onclick="selectSubColor(this, 'bg-grad-3')"></div><div class="color-dot bg-grad-4" onclick="selectSubColor(this, 'bg-grad-4')"></div></div><input type="hidden" id="subCardColor" value="bg-grad-1"><div class="d-flex gap-2"><button class="btn btn-light w-100" id="btnDelSubCard" style="display:none"><i class="fas fa-trash text-danger"></i></button><button type="button" class="btn btn-primary w-100" id="btnSaveSubCard">Salvar</button></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="taskModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content border-0 shadow"><div class="modal-body p-4"><div class="d-flex justify-content-between align-items-center mb-3"><h5 class="fw-bold m-0">Item Principal</h5><select id="taskPriority" class="form-select form-select-sm w-auto border-0 bg-light fw-bold text-primary"><option value="urgent">üî• Urgente</option><option value="medium">‚ö†Ô∏è Prioridade M√©dia</option><option value="low" selected>‚úÖ Prioridade Baixa</option></select></div><input type="hidden" id="taskId"><input type="text" id="taskTitle" class="form-control form-control-lg border-0 px-0 fw-bold mb-2" placeholder="O que precisa ser feito?"><textarea id="taskDesc" class="form-control border-0 px-0 text-muted" rows="4" placeholder="Detalhes..."></textarea><div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top"><button class="btn btn-light text-danger" id="btnDelTask"><i class="fas fa-trash"></i></button><button class="btn btn-primary px-4 rounded-pill" id="btnSaveTask">Salvar</button></div></div></div></div></div>
    
    <div class="modal fade" id="trashModal" tabindex="-1"><div class="modal-dialog modal-fullscreen"><div class="modal-content"><div class="modal-header border-0"><h5 class="fw-bold"><i class="fas fa-trash-alt me-2"></i>Lixeira</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body bg-light" id="trashList"></div></div></div></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
