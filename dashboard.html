<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Painel Org. Borges</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link href="css/dashboard.css" rel="stylesheet">
</head>
<body>

    <div id="loadingOverlay"><div class="spinner-border text-light" role="status"></div></div>

    <div id="loginScreen">
        <div class="login-card">
            <h1 class="display-3 mb-2">ğŸš€</h1>
            <h3 class="mb-4 fw-bold text-white">Painel Borges</h3>
            <button id="btnLogin" class="btn btn-light w-100 py-3 rounded-pill fw-bold shadow-lg">
                <i class="fab fa-google me-2"></i> Entrar
            </button>
            <p id="authError" class="text-danger mt-3 fw-bold small"></p>
        </div>
    </div>

    <nav class="navbar navbar-custom fixed-top px-3">
        <div class="d-flex align-items-center">
            <button id="backBtn" class="btn btn-icon me-2" style="display:none;"><i class="fas fa-arrow-left"></i></button>
            <span class="navbar-brand mb-0 h1 fw-bold theme-text" id="pageTitle">
                <i class="fas fa-cube me-2"></i>Painel Borges
            </span>
        </div>
        <div class="d-flex align-items-center gap-3">
            <i class="fas fa-moon cursor-pointer theme-text icon-hover" id="themeToggle"></i>
            <button class="btn btn-icon icon-hover" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu"><i class="fas fa-bars theme-text"></i></button>
        </div>
    </nav>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="sidebarMenu">
        <div class="offcanvas-header"><h5 class="offcanvas-title fw-bold">Menu</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div>
        <div class="offcanvas-body d-flex flex-column">
            <div class="nav flex-column gap-2">
                <button class="btn btn-light w-100 text-start p-3 nav-btn active" data-target="home"><i class="fas fa-th-large me-2"></i> Projetos</button>
                <button class="btn btn-light w-100 text-start p-3 nav-btn" data-target="iframe" data-url="index.html"><i class="fas fa-chart-line me-2"></i> Financeiro</button>
                <button class="btn btn-light w-100 text-start p-3 nav-btn" data-target="iframe" data-url="life.html"><i class="fas fa-dna me-2"></i> Life</button>
                <button class="btn btn-light w-100 text-start p-3 nav-btn text-danger" id="btnTrash"><i class="fas fa-trash me-2"></i> Lixeira Global</button>
            </div>
            <div class="mt-auto"><hr><div class="d-flex align-items-center justify-content-between p-2"><small class="text-muted" id="userEmail">...</small><button id="btnLogout" class="btn btn-sm btn-outline-danger">Sair</button></div></div>
        </div>
    </div>

    <main class="main-container custom-scrollbar">
        <section id="view-projects" class="fade-in pb-5">
            <div class="section-block">
                <div class="d-flex justify-content-between align-items-center mb-3 px-2">
                    <h6 class="section-title neon-text-green"><i class="fas fa-user-astronaut me-2"></i>PESSOAL</h6>
                    <button class="btn btn-xs btn-outline-light rounded-pill small-btn" onclick="addSpacer('Pessoal')">+ Casinha Vazia</button>
                </div>
                <div id="grid-Pessoal" class="project-grid" data-type="Pessoal"></div>
            </div>
            <div class="section-block mt-5">
                <div class="d-flex justify-content-between align-items-center mb-3 px-2">
                    <h6 class="section-title neon-text-blue"><i class="fas fa-briefcase me-2"></i>PROFISSIONAL</h6>
                    <button class="btn btn-xs btn-outline-light rounded-pill small-btn" onclick="addSpacer('Profissional')">+ Casinha Vazia</button>
                </div>
                <div id="grid-Profissional" class="project-grid" data-type="Profissional"></div>
            </div>
            <div class="section-block mt-5">
                <div class="d-flex justify-content-between align-items-center mb-3 px-2">
                    <h6 class="section-title neon-text-orange"><i class="fas fa-lightbulb me-2"></i>IDEIAS</h6>
                    <button class="btn btn-xs btn-outline-light rounded-pill small-btn" onclick="addSpacer('Ideia')">+ Casinha Vazia</button>
                </div>
                <div id="grid-Ideia" class="project-grid" data-type="Ideia"></div>
            </div>
        </section>

        <section id="view-kanban" style="display:none;" class="fade-in pb-5">
            <div class="d-flex justify-content-between align-items-center mb-4 p-2 glass-panel rounded-pill shadow-sm">
                <select id="viewModeSelector" class="form-select form-select-sm border-0 fw-bold text-primary w-auto bg-transparent ps-3">
                    <option value="hybrid" class="text-dark">ğŸ‘ï¸ Tudo</option>
                    <option value="cards" class="text-dark">ğŸƒ SÃ³ Cards</option>
                    <option value="kanban" class="text-dark">âœ… SÃ³ Tarefas</option>
                </select>
                <div class="d-flex align-items-center gap-2 pe-1">
                    <button class="btn btn-sm btn-outline-light rounded-pill small-btn" onclick="addSubSpacer()">+ Casinha</button>
                    <button class="btn btn-primary rounded-circle shadow-neon" onclick="openSubCardModal()" style="width: 40px; height: 40px;"><i class="fas fa-plus"></i></button>
                </div>
            </div>

            <div id="area-resources">
                <h6 class="fw-bold mb-3 ms-2 text-white-force text-uppercase" style="letter-spacing: 1px; font-size: 0.8rem;">Recursos & Cards</h6>
                <div id="subCardsGrid" class="sub-card-grid mb-5"></div>
            </div>

            <div id="area-kanban">
                <div class="glass-divider mb-4"></div>
                <button class="btn btn-primary w-100 py-3 mb-4 shadow-neon fw-bold rounded-3" onclick="openTaskModal()">
                    <i class="fas fa-plus-circle me-2"></i> NOVA TAREFA
                </button>
                <div class="search-bar-container mb-4">
                    <i class="fas fa-search text-white-50"></i>
                    <input type="text" id="taskSearch" placeholder="Filtrar tarefas...">
                </div>
                <div class="kanban-board">
                    <div class="kanban-col-wrapper"><div class="kanban-header urgent"><span>ğŸ”¥ Urgente</span><span class="count-badge">0</span></div><div id="col-urgent" class="kanban-col"></div></div>
                    <div class="kanban-col-wrapper"><div class="kanban-header medium"><span>âš ï¸ AtenÃ§Ã£o</span><span class="count-badge">0</span></div><div id="col-medium" class="kanban-col"></div></div>
                    <div class="kanban-col-wrapper"><div class="kanban-header low"><span>âœ… Normal</span><span class="count-badge">0</span></div><div id="col-low" class="kanban-col"></div></div>
                </div>
            </div>
        </section>

        <iframe id="appFrame" class="full-frame"></iframe>
    </main>

    <button id="fabBtn" class="fab shadow-neon"><i class="fas fa-plus"></i></button>

    <div class="modal fade" id="projectModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content border-0 shadow-lg"><div class="modal-body p-4"><h5 class="fw-bold mb-3">Novo Projeto</h5><input type="hidden" id="projId"><div class="form-floating mb-3"><input type="text" class="form-control fw-bold" id="projTitle" placeholder="Nome"><label>Nome do Projeto</label></div><div class="form-floating mb-4"><select class="form-select fw-bold" id="projType"><option value="Pessoal">ğŸ  Pessoal</option><option value="Profissional">ğŸ’¼ Profissional</option><option value="Ideia">ğŸ’¡ Ideia</option></select><label>Categoria</label></div><label class="small text-muted mb-2 fw-bold text-uppercase">Escolha a Cor</label><div class="d-flex flex-wrap gap-2 mb-4 justify-content-center">
        <div class="color-dot bg-grad-dark" onclick="selectColor(this, 'bg-grad-dark')"></div><div class="color-dot bg-grad-1 selected" onclick="selectColor(this, 'bg-grad-1')"></div><div class="color-dot bg-grad-2" onclick="selectColor(this, 'bg-grad-2')"></div><div class="color-dot bg-grad-3" onclick="selectColor(this, 'bg-grad-3')"></div><div class="color-dot bg-grad-4" onclick="selectColor(this, 'bg-grad-4')"></div><div class="color-dot bg-grad-5" onclick="selectColor(this, 'bg-grad-5')"></div><div class="color-dot bg-grad-6" onclick="selectColor(this, 'bg-grad-6')"></div><div class="color-dot bg-grad-7" onclick="selectColor(this, 'bg-grad-7')"></div><div class="color-dot bg-grad-8" onclick="selectColor(this, 'bg-grad-8')"></div><div class="color-dot bg-grad-9" onclick="selectColor(this, 'bg-grad-9')"></div><div class="color-dot bg-grad-10" onclick="selectColor(this, 'bg-grad-10')"></div></div><input type="hidden" id="selectedColor" value="bg-grad-1"><button class="btn btn-primary w-100 py-2 fw-bold shadow-sm" id="btnSaveProj">Salvar Projeto</button><button class="btn btn-link text-danger w-100 mt-2 btn-sm" id="btnDelProj" style="display:none">Mover para Lixeira</button></div></div></div></div>

    <div class="modal fade" id="subCardModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content border-0 shadow-lg"><div class="modal-body p-4"><h5 class="fw-bold mb-3">Novo Card Interno</h5><input type="hidden" id="subCardId"><div class="mb-3"><input type="text" id="subCardTitle" class="form-control fw-bold" placeholder="TÃ­tulo do Card"></div><div class="mb-3"><select id="subCardType" class="form-select bg-light fw-bold"><option value="checklist">â˜‘ï¸ Checklist / Lista</option><option value="text">ğŸ“„ Texto</option><option value="link">ğŸ”— Link</option></select></div><div class="mb-3" id="areaInputText"><textarea id="subCardContent" class="form-control" rows="5" placeholder="ConteÃºdo..."></textarea></div><div class="mb-3" id="areaInputChecklist" style="display:none;"><div class="input-group mb-2"><select id="newCheckPriority" class="form-select fw-bold" style="max-width: 80px;"><option value="low">ğŸŸ¢</option><option value="medium">ğŸŸ¡</option><option value="urgent">ğŸ”´</option></select><input type="text" id="newCheckItem" class="form-control" placeholder="Item..."><button class="btn btn-dark" onclick="addTempItem()"><i class="fas fa-plus"></i></button></div><div id="tempChecklistList" class="checklist-container mt-2"></div></div><label class="small text-muted fw-bold">Cor</label><div class="d-flex flex-wrap gap-2 mb-4 justify-content-center">
        <div class="color-dot bg-grad-dark" onclick="selectSubColor(this, 'bg-grad-dark')"></div><div class="color-dot bg-grad-1 selected" onclick="selectSubColor(this, 'bg-grad-1')"></div><div class="color-dot bg-grad-2" onclick="selectSubColor(this, 'bg-grad-2')"></div><div class="color-dot bg-grad-3" onclick="selectSubColor(this, 'bg-grad-3')"></div><div class="color-dot bg-grad-4" onclick="selectSubColor(this, 'bg-grad-4')"></div><div class="color-dot bg-grad-5" onclick="selectSubColor(this, 'bg-grad-5')"></div><div class="color-dot bg-grad-6" onclick="selectSubColor(this, 'bg-grad-6')"></div></div><input type="hidden" id="subCardColor" value="bg-grad-1"><div class="d-flex gap-2"><button class="btn btn-light w-100" id="btnDelSubCard" style="display:none"><i class="fas fa-trash text-danger"></i></button><button type="button" class="btn btn-primary w-100 fw-bold" id="btnSaveSubCard">Salvar</button></div></div></div></div></div>

    <div class="modal fade" id="taskModal" tabindex="-1"><div class="modal-dialog modal-dialog-centered"><div class="modal-content border-0 shadow-lg"><div class="modal-body p-4"><div class="d-flex justify-content-between align-items-center mb-3"><h5 class="fw-bold m-0">Nova Tarefa</h5><select id="taskPriority" class="form-select form-select-sm w-auto fw-bold"><option value="urgent">ğŸ”¥ Urgente</option><option value="medium">âš ï¸ MÃ©dia</option><option value="low" selected>âœ… Baixa</option></select></div><input type="hidden" id="taskId"><input type="text" id="taskTitle" class="form-control form-control-lg border-0 px-0 fw-bold mb-2 fs-4" placeholder="TÃ­tulo..."><textarea id="taskDesc" class="form-control border-0 px-0 text-muted" rows="3" placeholder="Detalhes..."></textarea><div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top"><button class="btn btn-light text-danger" id="btnDelTask"><i class="fas fa-trash"></i></button><button class="btn btn-primary px-4 rounded-pill fw-bold" id="btnSaveTask">Salvar</button></div></div></div></div></div>
    
    <div class="modal fade" id="trashModal" tabindex="-1">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content bg-light">
                <div class="modal-header border-0 shadow-sm">
                    <h5 class="fw-bold"><i class="fas fa-trash-alt me-2 text-danger"></i> Lixeira Global</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0">
                    <div id="trashList" class="p-3"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
